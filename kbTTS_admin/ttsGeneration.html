<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="format-detection" content="telephone=no">

    <!-- Cache reset -->
    <meta http-equiv="Expires" content="Mon, 06 Jan 2016 00:00:01 GMT">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache">

    <!---------------------- General Resources ---------------------->
    <!-- General CSS -->
    <link rel="stylesheet" type="text/css" href="resources/css/kb_tts_admin.css">

    <!-- General Script -->
    <script type="text/javascript" src="resources/js/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="resources/js/jquery-migrate-3.3.1.min.js"></script>
    <script type="text/javascript" src="resources/js/kb_tts_admin.js"></script>

    <title>TTS 음성 생성 || KB TTS Admin</title>
</head>
<body>
    <!-- #wrap -->
    <div id="wrap">
        <!-- #header -->
        <div id="header">
            <h1><a href="ttsGeneration.html"><img src="resources/images/logo_kbTTS_admin.svg" alt="KB TTS Admin"></a></h1>
            <div class="etc">
                <ul>
                    <li class="ico_user">
                        <a href="#none" title="사용자 메뉴">
                            <span class="hide">사용자 메뉴</span>
                        </a>
                        <div class="user_cont">
                            <div class="user_info">
                                <span class="thumb">
                                    <img src="" alt="">
                                </span>
                                <span class="userLevel">시스템관리자</span>
                                <span class="userId">Kb-admin</span>
                            </div>
                            <ul class="user_nav">
                                <li><a href="accountSet.html">계정 설정</a></li>
                                <li class="logout"><a href="#none">로그아웃</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <!-- //#header -->

        <!-- #container -->
        <div id="container">
            <!-- #gnb -->
            <div id="gnb">
                <ul class="nav">
                    <li class="active"><a href="ttsGeneration.html">TTS 음성 생성</a></li>                
                    <li><a href="userManagement.html">사용자 관리</a></li>                
                    <li><a href="accountSet.html">계정 설정</a></li>                
                </ul>
            </div>
            <!-- //#gnb -->

            <!-- #contents -->
            <div id="contents" class="tts_gnrtn">
                <!-- .content -->
                <div class="content">
                    <!-- .titArea -->
                    <div class="titArea">
                        <h3>TTS 음성 생성</h3>
                    </div>
                    <!-- //.titArea -->

                    <div class="stn">
                        <div class="tit">
                            <h4>TTS 생성</h4>
                        </div>
                        <div class="lineBox voice_gnrtn">
                            <dl>
                                <dt>보이스</dt>
                                <dd>
                                    <div class="radioBox">
                                        <!-- [D] input[type="radio"]의 id와 label의 for값을 동일하게 부여해야 합니다. -->
                                        <input type="radio" name="tts_voice" id="voice01" checked>
                                        <label for="voice01">정직한 여성 목소리</label>
                                    </div>
                                    <div class="radioBox">
                                        <!-- [D] input[type="radio"]의 id와 label의 for값을 동일하게 부여해야 합니다. -->
                                        <input type="radio" name="tts_voice" id="voice02">
                                        <label for="voice02">밝은 여성 목소리</label>
                                    </div>
                                    <div class="radioBox">  
                                        <!-- [D] input[type="radio"]의 id와 label의 for값을 동일하게 부여해야 합니다. -->
                                        <input type="radio" name="tts_voice" id="voice03">
                                        <label for="voice03">차분한 남성 목소리</label>
                                    </div>
                                </dd>
                            </dl>
                        </div>
                        <div class="lineBox voice_gnrtn">
                            <div class="tts_ipt_txt">
                                <div class="textarea" contenteditable="true" placeholder="여기를 눌러 텍스트를 입력하세요."></div>
                                <div class="txtCount">(<span class="current">0</span>/1000)</div>
                            </div>
                            <!-- [D] 초기 화면 진입 시 비활성화 상태인 경우 .btnBox addClass('disabled')해주세요. -->
                            <div class="btnBox disabled">
                                <p class="desc fl">최대 1000자 까지 입력가능합니다.</p>
                                <button type="button" class="btn_primary btn_tts_start">TTS 실행</button>
                            </div>
                        </div>
                    </div>

                    <div class="stn">
                        <div class="tit">
                            <h4>TTS 음성확인</h4>
                        </div>
                        <!-- [D] 비활성화 상태인 경우 .lineBox에 addClass('disabled')해주세요. -->
                        <div class="lineBox voice_chk disabled">
                            <!-- .audioArea -->
                            <div class="audioArea">
                                <div class="audioBox">
                                    <audio class="audio" src="resources/audio/aekukka.mp3"></audio>
                                </div>
                                <!-- [D] 재생바, 재생, 일시정지, 비디오 시간 세팅은 기능 추가완료 / audioPlayer.js 파일 참고 -->
                                <div class="player">
                                    <button type="button" class="btn_play">
                                        <span class="hide">재생</span>
                                    </button>
                                    <span class="player_time current">00:00</span>
                                    <div class="player_bar">
                                        <div class="slider_bar"></div>
                                    </div>
                                    <span class="player_time duration">00:00</span>
                                </div>
                            </div>
                            <!-- //.audioArea -->
                            <!-- .downloadArea -->
                            <div class="downloadArea">
                                <dl class="fl">
                                    <dt>포맷</dt>
                                    <dd>
                                        <select class="select">
                                            <option value="">8khz, 8bit, a-law, mono</option>
                                        </select>
                                    </dd>
                                    <dt>확장자</dt>
                                    <dd>
                                        <select class="select">
                                            <option value="">wav</option>
                                        </select>
                                    </dd>
                                </dl>
                                <button type="button" class="btn_primary">다운로드</button>
                            </div>
                            <!-- //.downloadArea -->
                        </div>
                    </div>

                    <div class="stn">
                        <div class="tit">
                            <h4>TTS 음성편집</h4>
                        </div>
                        <!-- [D] 비활성화 상태인 경우 .lineBox에 addClass('disabled')해주세요. -->
                        <div class="lineBox voice_edit disabled">
                            <div class="range_wrap">
                                <div class="rangeBox">
                                    <div class="range_slider"> 
                                        <label>속도</label>
                                        <input class="slide_bar" type="range" value="1" min="0.25" max="4" step="0.01">
                                        <ul class="range_value">
                                            <li>0.25x</li>
                                            <li>0.5x</li>
                                            <li>0.75x</li>
                                            <li>1.0x</li>
                                            <li>1.25x</li>
                                            <li>1.5x</li>
                                            <li>1.75x</li>
                                            <li>2.0x</li>
                                            <li>2.25x</li>
                                            <li>2.5x</li>
                                            <li>2.75x</li>
                                            <li>3.0x</li>
                                            <li>3.25x</li>
                                            <li>3.5x</li>
                                            <li>3.75x</li>
                                            <li>4.0x</li>
                                        </ul>
                                    </div>
                                    <div class="range_view">
                                        <button type="button" class="btn_vol btn_vol_down" title="감소">
                                            <span class="hide">감소</span>
                                        </button>
                                        <!-- [D] 최소, 최댓값을 초과하여 입력 시 .ipt_txt에 addClass('error')해주면 에러표시 활성화됩니다. -->
                                        <!-- [D] 위 경우 '유효한 값이 아닙니다.' 시스템 팝업 띄워지며, 팝업창 확인 시 각 최소, 최대값으로 자동 조정 필요 -->
                                        <!-- [D] 상단 input[type="range"] value 값을 .ipt_txt에 실시간 반영 필요합니다. -->
                                        <input type="number" class="ipt_txt error" value="1">
                                        <button type="button" class="btn_vol btn_vol_up" title="증가">
                                            <span class="hide">증가</span>
                                        </button>
                                    </div>  
                                </div>
    
                                <div class="rangeBox">
                                    <div class="range_slider"> 
                                        <label>볼륨</label>
                                        <input class="slide_bar" type="range" value="0" min="-10" max="10" step="0.01">
                                        <ul class="range_value">
                                            <li>-10dB</li>
                                            <li>-5db</li>
                                            <li>0dB</li>
                                            <li>5db</li>
                                            <li>10dB</li>
                                        </ul>
                                    </div>
                                    <div class="range_view">
                                        <button type="button" class="btn_vol btn_vol_down" title="감소">
                                            <span class="hide">감소</span>
                                        </button>
                                        <!-- [D] 최소, 최댓값을 초과하여 입력 시 .ipt_txt에 addClass('error')해주면 에러표시 활성화됩니다. -->
                                        <!-- [D] 위 경우 '유효한 값이 아닙니다.' 시스템 팝업 띄워지며, 팝업창 확인 시 각 최소, 최대값으로 자동 조정 필요 -->
                                        <!-- [D] 상단 input[type="range"] value 값을 .ipt_txt에 실시간 반영 필요합니다. -->
                                        <input type="number" class="ipt_txt" value="0">
                                        <button type="button" class="btn_vol btn_vol_up" title="증가">
                                            <span class="hide">증가</span>
                                        </button>
                                    </div>  
                                </div>
    
                                <div class="rangeBox">
                                    <div class="range_slider"> 
                                        <label>높낮이</label>
                                        <input class="slide_bar" type="range" value="0" min="-20" max="20" step="0.01">
                                        <ul class="range_value">
                                            <li>-20st</li>
                                            <li>-15st</li>
                                            <li>-10st</li>
                                            <li>-5st</li>
                                            <li>0st</li>
                                            <li>5st</li>
                                            <li>10st</li>
                                            <li>15st</li>
                                            <li>20st</li>
                                        </ul>
                                    </div>
                                    <div class="range_view">
                                        <button type="button" class="btn_vol btn_vol_down" title="감소">
                                            <span class="hide">감소</span>
                                        </button>
                                        <!-- [D] 최소, 최댓값을 초과하여 입력 시 .ipt_txt에 addClass('error')해주면 에러표시 활성화됩니다. -->
                                        <!-- [D] 위 경우 '유효한 값이 아닙니다.' 시스템 팝업 띄워지며, 팝업창 확인 시 각 최소, 최대값으로 자동 조정 필요 -->
                                        <!-- [D] 상단 input[type="range"] value 값을 .ipt_txt에 실시간 반영 필요합니다. -->
                                        <input type="number" class="ipt_txt" value="0">
                                        <button type="button" class="btn_vol btn_vol_up" title="증가">
                                            <span class="hide">증가</span>
                                        </button>
                                    </div>  
                                </div>
                            </div>                           

                            <div class="btnBox">
                                <button type="button" class="btn_primary btn_voice_trsf">음성변환</button>
                            </div>
                        </div>
                    </div>

                    <div class="stn">
                        <div class="tit">
                            <h4>변환음성확인</h4>
                        </div>
                        <!-- [D] 비활성화 상태인 경우 .lineBox에 addClass('disabled')해주세요. -->
                        <div class="lineBox trsf_voice_chk disabled">
                            <!-- .audioArea -->
                            <div class="audioArea">
                                <div class="audioBox">
                                    <audio class="audio" src="resources/audio/aekukka.mp3"></audio>
                                </div>
                                <!-- [D] 재생바, 재생, 일시정지, 비디오 시간 세팅은 기능 추가완료 / audioPlayer.js 파일 참고 -->
                                <div class="player">
                                    <button type="button" class="btn_play">
                                        <span class="hide">재생</span>
                                    </button>
                                    <span class="player_time current">00:00</span>
                                    <div class="player_bar">
                                        <div class="slider_bar"></div>
                                    </div>
                                    <span class="player_time duration">00:00</span>
                                </div>
                            </div>
                            <!-- //.audioArea -->
                            <!-- .downloadArea -->
                            <div class="downloadArea">
                                <dl class="fl">
                                    <dt>포맷</dt>
                                    <dd>
                                        <select class="select">
                                            <option value="">8khz, 8bit, a-law, mono</option>
                                        </select>
                                    </dd>
                                    <dt>확장자</dt>
                                    <dd>
                                        <select class="select">
                                            <option value="">wav</option>
                                        </select>
                                    </dd>
                                </dl>
                                <button type="button" class="btn_primary">다운로드</button>
                            </div>
                            <!-- //.downloadArea -->
                        </div>
                    </div>
                </div>
                <!-- //.content -->
            </div>
            <!-- //#contents -->
        </div>
        <!-- //#container -->        
    </div>
    <!-- //#wrap -->

    <!---------------------- Local Resources ---------------------->
    <!-- Local Script Library -->
    <script type="text/javascript" src="resources/js/audioPlayer.js"></script>

    <!-- Local Script -->
    <script type="text/javascript">
     jQuery.event.add(window,"load",function(){
        $(document).ready(function(){
            // TTS 생성 텍스트 1000자 입력 제한 & TTS 실행 버튼 활성화
            $('.tts_ipt_txt .textarea').keyup(function(e){
                var content = $(this).text();
                $('.txtCount .current').html(content.length);

                if(!$(this).text() == ''){
                    $(this).addClass('active');
                    $(this).parent().next().removeClass('disabled');
                    $(this).parent().next().find('button').prop('disabled', false);
                    if(content.length > 1000){
                        $(this).text(content.substring(0, 1000));
                        $('.txtCount .current').html(1000);
                    }
                }else{
                    $(this).removeClass('active');
                    $(this).parent().next().find('button').prop('disabled', true);
                }                
            });

            // TTS 실행 버튼 클릭 시 TTS 음성확인, TTS 음성편집 영역 활성화
            $('.btn_tts_start').on('click', function(){
                $('.lineBox.voice_chk, .lineBox.voice_edit').removeClass('disabled');
                $('.lineBox.voice_chk, .lineBox.voice_edit').find('select, input, button').prop('disabled', false);
            });

            // 음성변환 버튼 클릭 시 변환음성확인 영역 활성화
            $('.btn_voice_trsf').on('click', function(){
                $('.lineBox.trsf_voice_chk').removeClass('disabled');
                $('.lineBox.trsf_voice_chk').find('select, input, button').prop('disabled', false);
            });

            // TTS 음성편집 slide bar
            var settings = {
                fill: '#14adea',
                background: '#e1e1e1'
            }

            var sliders = document.querySelectorAll('.range_slider');

            Array.prototype.forEach.call(sliders, function(slider){
                slider.querySelector('input').addEventListener('input', function(event){
                    applyFill(event.target);
                });
                applyFill(slider.querySelector('input'));
            });

            function applyFill(slider) {
            var percentage = 100*(slider.value-slider.min)/(slider.max-slider.min);
            var bg = 'linear-gradient(90deg,' + settings.fill + ' ' + percentage + '%,' + settings.background + ' ' + (percentage + 0.1) + '%';
            slider.style.background = bg;
            }
        });
    });      
    </script>
</body>
</html>