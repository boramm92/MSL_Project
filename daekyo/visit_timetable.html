<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, target-densityDpi=device-dpi">
  <!-- (safari) 전화번호 형태로 된 문자열을 전화로 자동호출하지 못하게 함 -->
  <meta name="format-detection" content="telephone=no">
  <!-- favicon mobile -->
  <link rel="apple-touch-icon" sizes="180x180" href="resources/images/favicon/apple-touch-icon.png">
  <link rel="manifest" href="resources/images/favicon/site.webmanifest">
  <!-- css -->
  <link rel="stylesheet" href="resources/css/font.css">
  <link rel="stylesheet" href="resources/css/reset.css">
  <link rel="stylesheet" href="resources/css/teacher_ver_m.css">
  <!-- js -->
  <script type="text/javascript" src="resources/js/jquery-1.11.2.min.js"></script>
  <title>방문시간표</title>
</head>

<body>
  <div id="wrap">
    <!-- header -->
    <div id="header">
      <!-- header_bar -->
      <div class="header_bar">
        <div class="fl">
          <!-- [D] .btn_prev 페이지 뒤로가기 버튼에 class="hide"를 붙히면 display: none이 됩니다 -->
          <button type="button" class="btn_prev">
            <img src="resources/images/ico_back.svg" alt="뒤로가기">
          </button>
        </div>
        <h1 class="img_box">
          <img src="resources/images/logo_daekyo.svg" alt="대교 상상 키즈 로고">
        </h1>
        <div class="fr">
          <button type="button" class="gnb_open">
            <img src="resources/images/ico_menu.svg" alt="메뉴 열기">
          </button>
        </div>
      </div>
      <!-- //header_bar -->

      <!-- gnb -->
      <div id="gnb">
        <div class="gnb_box gnb_logo">
          <div class="img_box">
            <img src="resources/images/logo_daekyo_kids.svg" alt="대교 상상 키즈 로고">
          </div>
        </div>
        <!-- [D] gnb메뉴 중 방문시간표, 방문관리, 정산내역, 마이프로필에 새로 (.scd_disable_menu) 클래스 추가됨 -->
        <!-- [D] .scd_disable_menu 메뉴에 스케줄 활성여부 옵션에 따라 toggleclass(.disabled)됨  -->
        <div class="gnb_box gnb_card">
          <a href="visit_timetable.html" class="card scd_disable_menu">
            <img src="resources/images/ico_clock.svg" alt="방문시간표">
            <img src="resources/images/ico_clock_wg.svg" alt="방문시간표 비활성화">
            <span class="primary_text primary_text_s">
              방문시간표
            </span>
          </a>
          <a href="visit_management.html" class="card scd_disable_menu">
            <img src="resources/images/ico_schedule.svg" alt="방문관리">
            <img src="resources/images/ico_schedule_wg.svg" alt="방문관리 비활성화">
            <span class="primary_text primary_text_s">
              방문관리
            </span>
          </a>
          <a href="schedule_set.html" class="card">
            <img src="resources/images/ico_calendar.svg" alt="스케줄 설정">
            <span class="primary_text primary_text_s">
              스케줄 설정
            </span>
          </a>
          <a href="#none" class="card scd_disable_menu">
            <img src="resources/images/ico_folder.svg" alt="정산내역">
            <img src="resources/images/ico_folder_wg.svg" alt="정산내역 비활성화">
            <span class="primary_text primary_text_s">
              정산내역
            </span>
          </a>
          <a href="notice.html" class="card">
            <img src="resources/images/ico_list.svg" alt="공지사항">
            <span class="primary_text primary_text_s">
              공지사항
            </span>
          </a>
          <a href="use_information.html" class="card">
            <img src="resources/images/ico_page.svg" alt="자주묻는 질문">
            <span class="primary_text primary_text_s">
              자주묻는 질문
            </span>
          </a>
        </div>
        <div class="gnb_box gnb_card">
          <a href="profile.html" class="card scd_disable_menu">
            <img src="resources/images/ico_profile.svg" alt="My 프로필">
            <img src="resources/images/ico_profile_wg.svg" alt="My 프로필 비활성화">
            <span class="primary_text primary_text_s">
              My&nbsp;&nbsp;프로필
            </span>
          </a>
          <a href="#none" class="card">
            <img src="resources/images/ico_key.svg" alt="비밀번호 변경">
            <span class="primary_text primary_text_s">
              비밀번호 변경
            </span>
          </a>
          <a href="login.html" class="card">
            <img src="resources/images/ico_logout.svg" alt="로그아웃">
            <span class="primary_text primary_text_s">
              로그아웃
            </span>
          </a>
        </div>
        <div class="gnb_box">
          <a href="resources/video/sample_video.mp4" class="btn_movie">
            <img src="resources/images/ico_play.svg" alt="영상 바로가기">
            <span class="primary_text primary_text_s">우동선생님, 이렇게 활동하세요!</span>
          </a>
        </div>
      </div>
      <!-- //gnb -->
    </div>
    <!-- //header -->

    <!-- m_container -->
    <div id="m_container">
      <div class="visit_table">
        <h2 class="page_title">방문시간표</h2>
        <div class="notice">
          <div class="notice_bg">
            <span class="notice_text">시간표를 좌우로 밀어 방문일정을 확인해보세요!</span>
          </div>
        </div>

        <!-- time_schedule -->
        <div class="time_schedule">
          <!-- time_list 왼쪽에 고정된 시간입니다 -->
          <div class="time_list">
            <ul>
              <li class="title_month">8월</li>
              <li>08:00</li>
              <li>08:30</li>
              <li>09:00</li>
              <li>09:30</li>
              <li>10:00</li>
              <li>10:30</li>
              <li>11:00</li>
              <li>11:30</li>
              <li>12:00</li>
              <li>12:30</li>
              <li>13:00</li>
              <li>13:30</li>
              <li>14:00</li>
              <li>14:30</li>
              <li>15:00</li>
              <li>15:30</li>
              <li>16:00</li>
              <li>16:30</li>
              <li>17:00</li>
              <li>17:30</li>
              <li>18:00</li>
              <li>18:30</li>
              <li>19:00</li>
              <li>19:30</li>
              <li>20:00</li>
              <li>20:30</li>
              <li>21:00</li>
              <li>21:30</li>
              <li>22:00</li>
            </ul>
          </div>
          <!-- //time_list -->

          <!-- schedule 오른쪽 table 입니다 -->
          <div class="schedule">
            <div class="schedule_box">
              <!-- [D]
                오늘부터 D+92일까지 (총 93일)이 표시됩니다
                스케줄은 3일 단위로 보여집니다

                ul 하나 : 하루
                li.time_available : 선생님이 수업가능한 시간
              -->
              <ul>
                <li class="title_date">
                  <span class="day">21</span>
                  <span class="dayweek">월</span>
                </li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
              <ul>
                <li class="title_date">
                  <span class="day">22</span>
                  <span class="dayweek">화</span>
                </li>
                <li></li>
                <li></li>
                <li></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <!-- [D]
                  *방문박스 종류 2가지 - 정기방문/일회성방문 (정기방문만 정기방문 문구가 표시됩니다)

                  정기방문(분홍색 박스) :
                  .regular_visit > div.student_info 태그와 style="height"을 추가하면 정기방문 박스가 보여집니다.

                  방문박스가 생성되면 그 밑에 30분 비활성 박스(회색)가 함께 생성됩니다.

                  list 한 칸(30분단위) : 24px
                -->
                <li class="time_available regular_visit" data-time="1030">
                  <div class="student_info" style="height: 96px;">
                    <span>이찬원<br>정기방문</span>
                  </div>
                </li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <!-- [D]
                  *방문박스 종류 2가지 - 정기방문/일회성방문 (정기방문만 정기방문 문구가 표시됩니다)

                  일회성방문(초록색 박스) :
                  .onetime_visit > div.student_info 태그와 style="height"을 추가하면 일회성방문 박스가 보여집니다.

                  방문박스가 생성되면 그 밑에 30분 비활성 박스(회색)가 함께 생성됩니다.

                  list 한 칸(30분단위) : 24px
                -->
                <li class="time_available onetime_visit" data-time="1430">
                  <div class="student_info" style="height: 48px;">
                    <span>정동원</span>
                  </div>
                </li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
              <ul>
                <li class="title_date">
                  <span class="day">23</span>
                  <span class="dayweek">수</span>
                </li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li class="time_available" data-time="0930"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
              <ul>
                <li class="title_date">
                  <span class="day">24</span>
                  <span class="dayweek">목</span>
                </li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
              <ul>
                <li class="title_date">
                  <span class="day">25</span>
                  <span class="dayweek">금</span>
                </li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
              <ul>
                <li class="title_date saturday">
                  <span class="day">26</span>
                  <span class="dayweek">토</span>
                </li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
              <ul>
                <li class="title_date sunday">
                  <span class="day">27</span>
                  <span class="dayweek">일</span>
                </li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
              <ul>
                <li class="title_date">
                  <span class="day">28</span>
                  <span class="dayweek">월</span>
                </li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
              <ul>
                <li class="title_date">
                  <span class="day">29</span>
                  <span class="dayweek">화</span>
                </li>
                <li></li>
                <li></li>
                <li></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available regular_visit" data-time="1030">
                  <div class="student_info" style="height: 96px;">
                    <span>이찬원<br>정기방문</span>
                  </div>
                </li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li class="time_available onetime_visit" data-time="1430">
                  <div class="student_info" style="height: 48px;">
                    <span>정동원</span>
                  </div>
                </li>
                <li class="time_available"></li>
                <li class="time_available"></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </div>
          <!-- //schedule -->
        </div>
        <!-- //time_schedule -->

        <!-- 추가 AMR 200827 -->
        <button id="go_today" type="button">오늘</button>
      </div>
    </div>
    <!-- //m_container -->
  </div>

<script type="text/javascript">
  $(document).ready(function(){
    // 공통 AMR gnb 열기/닫기
    $('.gnb_open').on('click', function(e) {
      e.stopPropagation();
      handleGndClose();

      $('body').addClass('gnb_backdrop');
      $('#gnb').addClass('show');

      setTimeout(function () {
        $('#gnb').addClass('on');
      }, 100);

      // gnd 닫기
      function handleGndClose() {
        // gnb에서 클릭 시 버블링 막기
        $('#gnb').on('click', function(e) {
          e.stopPropagation();
        })

        // gnb를 제외한 body를 클릭
        $('body').on('click', function(e) {
          if ($('body').hasClass('gnb_backdrop')) {
            $('#gnb').removeClass('on');
            setTimeout(function () {
              $('#gnb').removeClass('show');
              $('body').removeClass('gnb_backdrop');
            }, 200);
          }
        })
      }
    });

    // AMR 방문시간표 swipe event
    function timeTableSwipe() {
      // 축약어 Wt = width , 한 페이지에 3일씩 보여집니다
      var visibleBoxWt = $('.schedule').innerWidth(); // 한 페이지 가로길이
      var targetWt = visibleBoxWt / 3; // 하루 가로길이
      var days = $('.schedule_box ul').length; // 총 일 수 구함
      var page = 0;
      var pages = days / 3; // 총 페이지 수 구함
      var maxPage = pages - 1; // 총 페이지 인덱스 구함
      var totalWt = visibleBoxWt * pages; // 총 페이지 가로길이

      $('.schedule_box').css({ 'width': totalWt + 'px' })
      $('.schedule_box ul').css({ 'width': targetWt + 'px' })

      // 방문시간표 테이블에서의 터치이벤트
      $('.schedule_box').on('touchstart', function (e) {
        var startX = e.originalEvent.touches[0].clientX;
        var startY = e.originalEvent.touches[0].clientY;
        var dragX = 0;
        var dragY = 0;
        var positionX = $(this).position().left;
        var direction = '';

        $(document).on('touchmove', timeTableTouchMove);
        $(document).on('touchend', timeTableTouchEnd);

        // touch move e
        function timeTableTouchMove(e) {
          dragX = e.originalEvent.touches[0].clientX - startX;
          dragY = e.originalEvent.touches[0].clientY - startY;

          $('body').addClass('prevent_scroll')
          if (direction == '') {
            if (Math.abs(dragX) > Math.abs(dragY)) direction = 'horizontal';
            if (Math.abs(dragY) > Math.abs(dragX)) direction = 'vertical';
          }

          if (direction === 'horizontal') {
            dragY = 0
            $('.schedule_box').css({
              'transition': 'none',
              'transform': 'translateX(' + (positionX + dragX) + 'px)'
            });
          }
          if (direction === 'vertical') {
            dragX = 0
            $('body').removeClass('prevent_scroll')
          }
        }

        // touch end e
        function timeTableTouchEnd(e) {
          if (direction == 'horizontal') {
            var directionOffset = dragX < -20 ? page += 1 : dragX > 20 ? page += -1 : page += 0;

            if (page < 0) {
              page = 0;
            } else if (page > maxPage) {
              page = maxPage;
            }

            var move = (-page * visibleBoxWt)
            $('.schedule_box').css({
              'transition': 'transform .1s',
              'transform': 'translateX(' + move + 'px)'
            });
            $('body').removeClass('prevent_scroll')
          }

          $(document).off('touchmove', timeTableTouchMove);
          $(document).off('touchend', timeTableTouchEnd);
        }

        // 추가 AMR 200827 오늘 날짜로 돌아가기
        $('#go_today').on('click', function(){
          $('.schedule_box').css({'transform': 'translateX(' + 0 + 'px)'});
          page = 0;
        });
      });
    }
    timeTableSwipe();
  })
</script>
</body>
</html>
